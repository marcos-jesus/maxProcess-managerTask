<div class="home-element">
  <div *ngIf="loading$ | async">
    <app-loading-overlay [isLoading]="loading$"></app-loading-overlay>
  </div>
  <p-card>
    <div class="home-container">
      <h3>Cadastro</h3>
      <div class="grid">
        <div class="col-12">
          <div class="grid">
            <div [formGroup]="form" class="col-12">
              <div class="col-12">
                <label>Titulo</label>
                <div>
                  <span 
                  *ngIf="!form.controls.title.pristine && form.controls.title.status === 'INVALID'"
                  class="maxprocess__input_validate"
                >
                  Necessário o prenchimento
                </span>
                  <input
                    formControlName="title"
                    type="text"
                    pInputText
                    placeholder="Digite seu titulo..."
                    class="col-12"
                    maxlength="80"
                    required
                  />
                </div>
              </div>

              <div class="col-12">
                <label>Descricão</label>
                <div>
                  <span 
                  *ngIf="!form.controls.description.pristine && form.controls.description.status === 'INVALID'"
                  class="maxprocess__input_validate"
                >
                  Necessário o prenchimento
                </span>
                  <input
                    formControlName="description"
                    type="text"
                    pInputText
                    placeholder="Digite sua descricão..."
                    class="col-12"
                    maxlength="300"
                    required
                  />
                </div>
              </div>
            </div>

            <div class="col-12">
              <label class="ml-2">Status</label>
              <div class="col-12">
                <p-treeSelect
                  class="md:w-20rem w-full"
                  containerStyleClass="w-full"
                  [(ngModel)]="selectedNodes"
                  [options]="nodes"
                  placeholder="Selecione um status"
                ></p-treeSelect>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="flex justify-content-end">
        <button
          (click)="handleSave()"
          pButton
          class="p-button-success"
          [disabled]="!isFormValid"
        >
          Salvar
        </button>
      </div>
    </div>
  </p-card>
</div>
